<!DOCTYPE html>
<html>
<head>
    <title>æˆç»©ç®¡ç†</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .score-form { background: white; padding: 20px; margin: 20px; border-radius: 10px; }
        .form-group { margin: 10px 0; }
        label { display: inline-block; width: 80px; }
        input, select { padding: 5px; width: 200px; }
    </style>
</head>
<body>
    <h1>ğŸ“Š æˆç»©ç®¡ç†</h1>
    <nav>
        <a href="dashboard.html">è¿”å›</a>
        <a href="students.html">å­¦ç”Ÿ</a>
        <a href="courses.html">è¯¾ç¨‹</a>
    </nav>
    
    <div class="score-form">
        <h3>å½•å…¥æˆç»©</h3>
        <div class="form-group">
            <label>å­¦ç”Ÿ:</label>
            <select id="studentSelect"></select>
        </div>
        <div class="form-group">
            <label>è¯¾ç¨‹:</label>
            <select id="courseSelect"></select>
        </div>
        <div class="form-group">
            <label>æˆç»©:</label>
            <input type="number" id="score" min="0" max="100" placeholder="0-100">
        </div>
        <button onclick="addScore()">æäº¤æˆç»©</button>
    </div>
    
    <table id="scoreTable" style="margin: 20px; width: 100%;">
        <thead><tr><th>å­¦ç”Ÿ</th><th>è¯¾ç¨‹</th><th>æˆç»©</th><th>æ“ä½œ</th></tr></thead>
        <tbody id="scoreBody"></tbody>
    </table>
    
    <script src="js/auth.js"></script>
    <script>
        function loadScores() {
            const scores = JSON.parse(localStorage.getItem('scores') || '[]');
            const body = document.getElementById('scoreBody');
            body.innerHTML = '';
            
            scores.forEach(score => {
                body.innerHTML += `<tr>
                    <td>${score.studentName}</td>
                    <td>${score.courseName}</td>
                    <td>${score.score}</td>
                    <td><button onclick="deleteScore(${score.id})">åˆ é™¤</button></td>
                </tr>`;
            });
        }
        
        function addScore() {
            const studentId = document.getElementById('studentSelect').value;
            const courseId = document.getElementById('courseSelect').value;
            const score = document.getElementById('score').value;
            
            if (studentId && courseId && score) {
                const scores = JSON.parse(localStorage.getItem('scores') || '[]');
                const students = JSON.parse(localStorage.getItem('students') || '[]');
                const courses = JSON.parse(localStorage.getItem('courses') || '[]');
                
                const student = students.find(s => s.id == studentId);
                const course = courses.find(c => c.id == courseId);
                
                scores.push({
                    id: scores.length + 1,
                    studentId: studentId,
                    studentName: student?.name || 'æœªçŸ¥',
                    courseId: courseId,
                    courseName: course?.name || 'æœªçŸ¥',
                    score: score,
                    date: new Date().toLocaleDateString()
                });
                
                localStorage.setItem('scores', JSON.stringify(scores));
                loadScores();
                alert('æˆç»©æ·»åŠ æˆåŠŸ');
            }
        }
        
        window.onload = function() {
            loadScores();
        };
    </script>
</body>
</html>
