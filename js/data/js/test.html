<!DOCTYPE html>
<html>
<head>
    <title>åŠŸèƒ½æµ‹è¯•</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px;
            border-radius: 10px;
            border-left: 5px solid #007bff;
        }
        .test-btn {
            margin: 5px;
            padding: 10px 15px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
        }
        .test-result {
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
    <nav>
        <a href="index.html">è¿”å›é¦–é¡µ</a>
        <a href="dashboard.html">æ§åˆ¶é¢æ¿</a>
    </nav>
    
    <div class="test-section">
        <h3>1. LocalStorageæµ‹è¯•</h3>
        <button class="test-btn" onclick="testStorage()">æµ‹è¯•æ•°æ®å­˜å‚¨</button>
        <button class="test-btn" onclick="testRetrieve()">æµ‹è¯•æ•°æ®è¯»å–</button>
        <div class="test-result" id="storageResult"></div>
    </div>
    
    <div class="test-section">
        <h3>2. ç™»å½•çŠ¶æ€æµ‹è¯•</h3>
        <button class="test-btn" onclick="checkLoginStatus()">æ£€æŸ¥ç™»å½•çŠ¶æ€</button>
        <button class="test-btn" onclick="mockLogin()">æ¨¡æ‹Ÿç™»å½•</button>
        <button class="test-btn" onclick="clearSession()">æ¸…é™¤Session</button>
        <div class="test-result" id="loginResult"></div>
    </div>
    
    <div class="test-section">
        <h3>3. æµè§ˆå™¨å…¼å®¹æ€§</h3>
        <button class="test-btn" onclick="detectBrowser()">æ£€æµ‹æµè§ˆå™¨</button>
        <button class="test-btn" onclick="checkLocalStorage()">æ£€æŸ¥LocalStorage</button>
        <div class="test-result" id="browserResult"></div>
    </div>
    
    <div class="test-section">
        <h3>4. æ•°æ®ç»Ÿè®¡</h3>
        <button class="test-btn" onclick="countData()">ç»Ÿè®¡æ•°æ®é‡</button>
        <div class="test-result" id="dataResult"></div>
    </div>
    
    <script>
        // æµ‹è¯•LocalStorage
        function testStorage() {
            localStorage.setItem('test_time', new Date().toLocaleString());
            document.getElementById('storageResult').innerHTML = 
                'âœ… LocalStorageå†™å…¥æˆåŠŸï¼æ•°æ®å·²ä¿å­˜';
        }
        
        function testRetrieve() {
            const data = localStorage.getItem('test_time');
            document.getElementById('storageResult').innerHTML = 
                data ? `âœ… è¯»å–åˆ°æ•°æ®ï¼š${data}` : 'âŒ æ²¡æœ‰æµ‹è¯•æ•°æ®';
        }
        
        // æµ‹è¯•ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            const user = sessionStorage.getItem('currentUser');
            document.getElementById('loginResult').innerHTML = 
                user ? `âœ… å·²ç™»å½•ï¼š${user}` : 'âŒ æœªç™»å½•';
        }
        
        function mockLogin() {
            sessionStorage.setItem('currentUser', 'æµ‹è¯•ç”¨æˆ·');
            document.getElementById('loginResult').innerHTML = 'âœ… æ¨¡æ‹Ÿç™»å½•æˆåŠŸ';
        }
        
        function clearSession() {
            sessionStorage.clear();
            document.getElementById('loginResult').innerHTML = 'âœ… Sessionå·²æ¸…é™¤';
        }
        
        // æµè§ˆå™¨æ£€æµ‹
        function detectBrowser() {
            const info = `æµè§ˆå™¨ï¼š${navigator.userAgent}`;
            document.getElementById('browserResult').innerHTML = `âœ… ${info}`;
        }
        
        function checkLocalStorage() {
            const supported = typeof localStorage !== 'undefined';
            document.getElementById('browserResult').innerHTML = 
                supported ? 'âœ… æ”¯æŒLocalStorage' : 'âŒ ä¸æ”¯æŒLocalStorage';
        }
        
        // æ•°æ®ç»Ÿè®¡
        function countData() {
            const students = JSON.parse(localStorage.getItem('students') || '[]');
            const teachers = JSON.parse(localStorage.getItem('teachers') || '[]');
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            document.getElementById('dataResult').innerHTML = 
                `å­¦ç”Ÿï¼š${students.length} æ¡<br>` +
                `æ•™å¸ˆï¼š${teachers.length} æ¡<br>` +
                `ç”¨æˆ·ï¼š${users.length} æ¡`;
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¿è¡Œä¸€äº›æµ‹è¯•
        window.onload = function() {
            detectBrowser();
            checkLocalStorage();
            countData();
        };
    </script>
</body>
</html>
